// import * as dot from "dotenv";
// dot.config();

// import TwitchJs, { ApiVersions, Message } from "twitch-js";
// import Websocket from "websocket";

// import modules from "./commands";
// import { handlePubSubMessages } from "./pubsub/handlers";

// const { env } = process;

// const { api, chat } = new TwitchJs({
//   token: `${env.TWITCH_ACCESS_TOKEN}`,
//   username: `${env.TMI_USER}`,
// });

// const ws = new Websocket.client();

// const setConnectionHandlers = (conn) => {
//   conn.on("message", handlePubSubMessages);

//   const listenToChannelPoints = async () => {
//     if (conn.connected) {
//       let listenObj = {
//         "type": "LISTEN",
//         "data": {
//           "topics": [`channel-points-channel-v1.${env.TWITCH_CHANNEL_ID}`],
//           "auth_token": env.USER_TOKEN_ALL_SCOPES,
//         },
//       };
//       conn.send(JSON.stringify(listenObj));
//     }
//   };

//   listenToChannelPoints();
// };

// ws.on("connect", (conn) => setConnectionHandlers(conn));

// chat.on(
//   TwitchJs.Chat.Events.PRIVATE_MESSAGE,
//   ({ command, channel, event, username, isSelf, message }) => {
//     if (!isSelf) {
//       // chat.say(channel, `Thanks @${username} for the message`)
//       if (message[0] === "!") {
//         let cmdArgs = message.split(" ");
//         const cmd = cmdArgs[0].substr(1);
//         const target = cmdArgs[1];

//         if (modules[cmd]) {
//           modules[cmd]({ api, chat, channel, target });
//         }
//       }
//     }
//   },
// );

// chat.connect().then(() => {
//   chat.join(`${env.TMI_CHANNELS}`).then(() => {
//     ws.connect("wss://pubsub-edge.twitch.tv");
//   });
// });
